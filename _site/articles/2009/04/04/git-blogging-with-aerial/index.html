<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]> ><! <![endif]-->
<html class='no-js' lang='en'>
  <!-- <![endif] -->
  <head>
    <meta charset='utf-8' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <title>Matt Sears | Git blogging with Aerial</title>
    <meta content='Matt Sears, Matt, Sears' name='keywords' />
    <meta author='Matt Sears' />
    <link href='http://feeds.feedburner.com/mattsears' rel='alternate' title='Feed for mattsears' type='application/atom+xml' />
    <link href='/stylesheets/app.css' rel='stylesheet' />
    <link href='/fonts/ss-social.css' rel='stylesheet' />
    <link href='/images/favicon.png' rel="shortcut icon" />
    <script src='/javascripts/foundation/modernizr.foundation.js'></script>
  </head>
  <body>
    <nav>
      <div class='row'>
      </div>
    </nav>
    <div class='row'>
      <div class='twelve columns centered'>
        <div class="row">
  <div class="ten column centered">
    <article>
      <header class="text-center">
        <a href='/'>
          <img src='/images/matt-sears.png' title='Matt Sears' alt='Matt Sears' width='100' height='100' class="me">
        </a>
        <h2>
          <a href="articles/2009/04/04/git-blogging-with-aerial">Git blogging with Aerial</a>
        </h2>
        <h5>
          Written by <a href="#">Matt</a> on April  4, 2009
          /
          <span>
            <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/12/10/minitest-quick-reference#disqus_thread'></a>
          </span>
        </h5>
      </header>
      <div class="row">
        <div class="ten column centered">
          <p>Over the last few years, I have grown tired of maintaining, migrating, and upgrading blog software, so I&#39;ve decided to roll my own with Ruby code. In doing so, I wanted to keep things as simple as possible with a basic set of features: articles, pages, comments, rss, etc. What I didn&#39;t want is a SQL database or an administration tool. I wanted to write articles in my text editor of choice (Emacs), in <a href="http://daringfireball.net/projects/markdown/">Markdown</a> format, and versioned with <a href="http://git-scm.com/">Git</a>. So I&#39;ve ported this site from Mephisto to my own custom creation. I call it Aerial.</p>

<p>Much inspiration for Aerial has come from <a href="http://github.com/karmi/marley">Marley</a>, a minimal flat-file blog engine written in Sinatra. Like Marley, Aerial is built with <a href="http://www.sinatrarb.com/">Sinatra</a> and uses plain text files. Unlike Marley, Aerial doesn&#39;t use a SQL database and uses <a href="http://github.com/mojombo/grit">Grit</a> to retrieve article and comment files from a Git repository.</p>

<h4>So how does it work?</h4>

<p>Articles and comments are stored as plain text files in a local Git directory. Aerial parses each file and converts them the Article and Comment objects with their own set of attributes such as title, body, tags, and author. For example, this article looks something like this:</p>
<div class="highlight"><pre><code class="text">Title      : Git blogging with Aerial
Tags       : projects, ruby, git, sinatra
Published  : 03/28/2009
Author     : Matt Sears

Over the last few years...
</code></pre>
</div>

<p>Since Aerial reads the articles from the Git repository, the contents of article won&#39;t display in the browser unless the changes are committed to Git. Same goes for comments.</p>

<h4>Working with remote repositories</h4>

<p>Aerial uses local and remote Git repositories to sync data between the production web server and your local environment. For example, when comments are submitted on the production web server, they are checked for Spam via <a href="http://akismet.com/">Akismet</a> and saved to the same directory as the article. Then, the new comment file is added to the production web server&#39;s repository and pushed to the remote repository (Github in my case). To pull in user comments to our local environment, simply use the pull command:</p>
<div class="highlight"><pre><code class="text">git pull
</code></pre>
</div>

<p>Now we have all the comments that users have submitted.</p>

<h4>Getting Started</h4>

<p>For Aerial to work, you&#39;ll need Git installed and the following RubyGems:</p>
<div class="highlight"><pre><code class="text">sudo gem install sinatra grit rdiscount haml
</code></pre>
</div>

<p>Grab the <a href="http://github.com/mattsears/aerial">source code</a> from Github.</p>

<p>A small configuration file in config/config.yml is used to store information about your blog. You can add your info now or leave it as is and it will still work. To setup and run Aerial, we need to run the boostrap Rake task:</p>
<div class="highlight"><pre><code class="text">rake bootstrap
</code></pre>
</div>

<p>This will install the necessary directories (specified in the config.yml file), javascript files, and insert a sample article to get you started. If every goes smoothly, Aerial should be up and running at:</p>
<div class="highlight"><pre><code class="text">http://localhost:4567
</code></pre>
</div>

<p>Keeping in spirit with minimalism, all the pages use <a href="http://haml.hamptoncatlin.com">Haml</a> for the templating engine. Of course, you may change this to the templating engine of your choice.</p>

<h4>Creating new articles</h4>

<p>Create a new folder in the app/articles directory.  You can name this folder anything you want, but it may be helpful to number them so they display in the order you want them to. For example, the folder for this articles looks like this:</p>
<div class="highlight"><pre><code class="text">app/articles/011-introducing-aerial
</code></pre>
</div>

<p>Next, create a text file with the extension &#39;.article&#39; and save it to the new folder.  The &#39;.article&#39; file extension let&#39;s Aerial know that this file should be converted to an Article object.  The name of the article will be the article&#39;s permalink. Remember, the article will not display on the site until it&#39;s committed to the git repository. When the article is completed, we can push it to the remote repository with the push command:</p>
<div class="highlight"><pre><code class="text">git push
</code></pre>
</div>

<p>Now, we&#39;re ready to deploy it.</p>

<h4>Deployment</h4>

<p>Deployment tasks are handled with <a href="http://rubyhitsquad.com/Vlad_the_Deployer.html">Vlad the Deployer</a>. A simple deployment script is located at config/deploy.rb. It assumes your running Apache and Phusions Passenger, but you can edit this file with your own settings. Future enhancements may include auto-syncing with post-receive hooks so that &#39;git push&#39; will make Aerial update itself, but for now we can deploy with a simple rake task:</p>
<div class="highlight"><pre><code class="text">rake deploy
</code></pre>
</div>

<p>This is by no means a comprehensive introduction. If you have any questions or run into any problems, please drop me a line.</p>

        </div>
      </div>
    </article>

    <div class="ten column centered">
      <div id='disqus_thread'></div>
      <script type='text/javascript'>
        //<![CDATA[
          var disqus_developer = 1;
        //]]>
      </script>
      <script type='text/javascript'>
        //<![CDATA[
          var disqus_shortname = 'mattsears'
          var disqus_identifier = "articles/2009/04/04/git-blogging-with-aerial";
          var disqus_url = "http://www.mattsears.com/articles/2009/04/04/git-blogging-with-aerial";

          (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());

          // The following are highly recommended additional parameters. Remove the slashes in front to use.
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        //]]>

      </script>
      <noscript>
        Please enable JavaScript to view the
        <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a>
      </noscript>
    </div>

  </div>

</div>


        <section class='explore'>
          <div class='row'>
            <div class='ten columns centered'>
              <h5 class='text-center capitalize'>
                Explore articles from my blog
              </h5>
            </div>
          </div>
          <div class='row categories'>
            <div class='six columns text-center centered'>
              <ul class='no-bullet'>

                <li>
                  <a href='/tags/git.html'>
                    Git
                  </a>
                </li>

                <li>
                  <a href='/tags/ruby.html'>
                    Ruby
                  </a>
                </li>

                <li>
                  <a href='/tags/clojure.html'>
                    Clojure
                  </a>
                </li>

                <li>
                  <a href='/tags/rspec.html'>
                    Rspec
                  </a>
                </li>

                <li>
                  <a href='/tags/minitest.html'>
                    Minitest
                  </a>
                </li>

              </ul>
            </div>
          </div>

          <div class='row'>
            <div class='six columns centered'>
              <form action="http://google.com/search" method="get">
                <fieldset role="search">
                  <input type="hidden" name="q" value="site:mattsears.com" />
                  <input class="search" type="text" name="q" results="0"
                  placeholder="... or search this site for (via Google)"/>
                </fieldset>
              </form>
            </div>
          </div>
        </section>

        <section class='browse'>
          <div class='row'>
            <div class='ten columns centered'>
              <div class='row'>
                <div class='six mobile-four columns'>
                  <h5>
                    <b>
                      New here?
                    </b>
                    Start with our best hits:
                  </h5>
                  <hr />

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/12/10/minitest-quick-reference'>
                        Minitest Quick Reference
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>
                        Nyan Cat RSpec Formatter
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>
                        Ruby Blocks as Dynamic Callbacks
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2009/06/06/20-clojure-links-to-get-you-up-to-speed'>
                        20 Clojure Links To Get You Up To Speed
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/10/12/gaga-key-value-store'>
                        Gaga, A Git-Backed Key/Value Store
                      </a>
                    </div>
                  </div>

                </div>
                <div class='six mobile-four columns'>
                  <h5>
                    <b>
                      Back again?
                    </b>
                    Catch up on our latest posts:
                  </h5>
                  <hr />

                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/12/10/minitest-quick-reference'>
                        Minitest Quick Reference
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>
                        Ruby Blocks as Dynamic Callbacks
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>
                        Nyan Cat RSpec Formatter
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/10/12/gaga-key-value-store'>
                        Gaga, A Git-Backed Key/Value Store
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/05/15/print-stamps-with-ruby'>
                        Print Stamps With Ruby!
                      </a>
                    </div>
                  </div>
                  

                </div>
              </div>
            </div>
          </div>
        </section>

        <footer class='row text-center'>
          <div class='twelve columns'>
            <div class='row'>
              <div class='twelve columns'>
                <p>
                  You should follow me on
                  <a href="https://twitter.com/mattsears" rel="external">Twitter</a>
                  and subscribe to
                  my <a href='http://feeds.feedburner.com/mattsears'>RSS</a>
                  feed. Trust me.
                  <br />
                  Copyright &copy; 2012 Matt Sears.
                </p>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var _gauges = _gauges || [];
        (function() {
          var t   = document.createElement('script');
          t.type  = 'text/javascript';
          t.async = true;
          t.id    = 'gauges-tracker';
          t.setAttribute('data-site-id', '4fb913d1f5a1f50be2000073');
          t.src = '//secure.gaug.es/track.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(t, s);
        })();
      //]]>
    </script>
    <script src='/javascripts/foundation/jquery.js'></script>
    <script src='/javascripts/foundation/jquery.cookie.js'></script>
    <script src='/javascripts/foundation/jquery.event.move.js'></script>
    <script src='/javascripts/foundation/jquery.event.swipe.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.alerts.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.buttons.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.forms.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.mediaQueryToggle.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.navigation.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.topbar.js'></script>
    <script src='/javascripts/foundation/jquery.placeholder.js'></script>
    <script src='/javascripts/foundation/app.js'></script>
  </body>
</html>
