<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/ -->
<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]> ><! <![endif]-->
<html class='no-js' lang='en'>
  <!-- <![endif] -->
  <head>
    <meta charset='utf-8' />
    <meta content='width=device-width, initial-scale=1.0' name='viewport' />
    <title>Matt Sears | Print Stamps With Ruby!</title>
    <meta content='Matt Sears, Matt, Sears' name='keywords' />
    <meta author='Matt Sears' />
    <link href='http://feeds.feedburner.com/mattsears' rel='alternate' title='Feed for mattsears' type='application/atom+xml' />
    <link href='/stylesheets/app.css' rel='stylesheet' />
    <link href='/fonts/ss-social.css' rel='stylesheet' />
    <link href='/images/favicon.png' rel="shortcut icon" />
    <script src='/javascripts/foundation/modernizr.foundation.js'></script>
  </head>
  <body>
    <nav>
      <div class='row'>
      </div>
    </nav>
    <div class='row'>
      <div class='twelve columns centered'>

        <div class="row">
  <div class="ten column centered">
    <article>
      <header class="text-center">
        <a href='/'>
          <img src='/images/matt-sears.png' title='Matt Sears' alt='Matt Sears' width='100' height='100' class="me">
        </a>
        <h2>
          <a href="articles/2011/05/15/print-stamps-with-ruby">Print Stamps With Ruby!</a>
        </h2>
        <h5>
          Written by <a href="#">Matt</a> on May 15, 2011
          /
          <span>
            <a class='dsq-comment-count comment-link commentslink' href='http://www.mattsears.com/articles/2011/12/10/minitest-quick-reference#disqus_thread'></a>
          </span>
        </h5>
      </header>
      <div class="row">
        <div class="ten column centered">
          <p>I&#39;ve just released <a href="https://github.com/mattsears/stamps">Stamps</a> - A Ruby gem for creating postage labels,
calculate the shipping cost of packages, standardize domestic
addresses via USPS CASS certified Address Matching Software, and track
shipments using the Stamps.com Web Services API.</p>

<h4>Quick Start</h4>

<p>First, you will need to register for a (free) developer account at
<a href="http://developer.stamps.com/developer">Stamps.com</a>. Once you receive
your test credentials and integration id, just plug them into the
configuration block:</p>
<div class="highlight"><pre><code class="ruby"><span class="no">Stamps</span><span class="o">.</span><span class="n">configure</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
  <span class="n">config</span><span class="o">.</span><span class="n">integration_id</span> <span class="o">=</span> <span class="s1">&#39;XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXXX&#39;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">username</span>       <span class="o">=</span> <span class="s1">&#39;STAMPS USERNAME&#39;</span>
  <span class="n">config</span><span class="o">.</span><span class="n">password</span>       <span class="o">=</span> <span class="s1">&#39;STAMPS PASSWORD&#39;</span>
<span class="k">end</span>
</code></pre>
</div>

<p>For a simple test, we can call <code>Stamps.account</code> to retreive
information about the account.  By default, Stamps will return all
responses as a Hash.</p>

<h4>Create a Stamp</h4>

<p>First, we need to standardize the shipping address that complies with the USPS address
formatting guidelines:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">standardized_address</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">clean_address</span><span class="p">(</span>
  <span class="ss">:address</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="ss">:full_name</span> <span class="o">=&gt;</span> <span class="s1">&#39;The White House&#39;</span><span class="p">,</span>
    <span class="ss">:address1</span>  <span class="o">=&gt;</span> <span class="s1">&#39;1600 Pennsylvania Avenue, NW&#39;</span><span class="p">,</span>
    <span class="ss">:city</span>      <span class="o">=&gt;</span> <span class="s1">&#39;Washington&#39;</span><span class="p">,</span>
    <span class="ss">:state</span>     <span class="o">=&gt;</span> <span class="s1">&#39;DC&#39;</span><span class="p">,</span>
    <span class="ss">:zip_code</span>  <span class="o">=&gt;</span> <span class="s1">&#39;20500&#39;</span>
<span class="p">})</span>
</code></pre>
</div>

<p>Now that we have a clean address we can create a new stamp.  The
<code>Stamps.create!</code> takes the sender and receiver address along with parameters
on the rate:</p>
<div class="highlight"><pre><code class="ruby"><span class="n">stamp</span> <span class="o">=</span> <span class="no">Stamps</span><span class="o">.</span><span class="n">create!</span><span class="p">(</span>
    <span class="ss">:rate</span>          <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="ss">:from_zip_code</span> <span class="o">=&gt;</span> <span class="s1">&#39;45440&#39;</span><span class="p">,</span>
      <span class="ss">:to_zip_code</span>   <span class="o">=&gt;</span> <span class="s1">&#39;20500&#39;</span><span class="p">,</span>
      <span class="ss">:weight_oz</span>     <span class="o">=&gt;</span> <span class="s1">&#39;6.5&#39;</span><span class="p">,</span>
      <span class="ss">:ship_date</span>      <span class="o">=&gt;</span> <span class="no">Date</span><span class="o">.</span><span class="n">today</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-%d&#39;</span><span class="p">),</span>
      <span class="ss">:package_type</span>   <span class="o">=&gt;</span> <span class="s1">&#39;Package&#39;</span><span class="p">,</span>
      <span class="ss">:service_type</span>   <span class="o">=&gt;</span> <span class="s1">&#39;US-FC&#39;</span>  <span class="c1"># Flat-rate</span>
    <span class="p">},</span>
    <span class="ss">:to</span>            <span class="o">=&gt;</span> <span class="n">standardized_address</span><span class="p">,</span>
    <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="p">{</span>
      <span class="ss">:full_name</span>   <span class="o">=&gt;</span> <span class="s1">&#39;Littlelines&#39;</span><span class="p">,</span>
      <span class="ss">:address1</span>    <span class="o">=&gt;</span> <span class="s1">&#39;50 Chestnut Street&#39;</span><span class="p">,</span>
      <span class="ss">:address2</span>    <span class="o">=&gt;</span> <span class="s1">&#39;Suite 234&#39;</span><span class="p">,</span>
      <span class="ss">:city</span>        <span class="o">=&gt;</span> <span class="s1">&#39;Beavervcreek&#39;</span><span class="p">,</span>
      <span class="ss">:state</span>       <span class="o">=&gt;</span> <span class="s1">&#39;OH&#39;</span><span class="p">,</span>
      <span class="ss">:zip_code</span>    <span class="o">=&gt;</span> <span class="s1">&#39;45440&#39;</span>
    <span class="p">}</span>
<span class="p">)</span>
</code></pre>
</div>

<h4>Hooray!</h4>

<p>That&#39;s it! Stamps will return a url of the stamp.  Print it and ship it!</p>
<div class="highlight"><pre><code class="ruby"><span class="n">stamp</span><span class="o">[</span><span class="ss">:url</span><span class="o">]</span>
</code></pre>
</div>

<p>If you are interested in more detailed information, check out the repo
on <a href="https://github.com/mattsears/stamps">Github</a>.</p>

        </div>
      </div>
    </article>

    <div class="ten column centered">
      <div id='disqus_thread'></div>
      <script type='text/javascript'>
        //<![CDATA[
          var disqus_developer = 1;
        //]]>
      </script>
      <script type='text/javascript'>
        //<![CDATA[
          var disqus_shortname = 'mattsears'
          var disqus_identifier = "articles/2011/05/15/print-stamps-with-ruby";
          var disqus_url = "http://www.mattsears.com/articles/2011/05/15/print-stamps-with-ruby";

          (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'http://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
          }());

          // The following are highly recommended additional parameters. Remove the slashes in front to use.
          /* * * DON'T EDIT BELOW THIS LINE * * */
          (function() {
              var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
              dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
              (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
        //]]>

      </script>
      <noscript>
        Please enable JavaScript to view the
        <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a>
      </noscript>
    </div>

  </div>

</div>


        <section class='explore'>
          <div class='row'>
            <div class='ten columns centered'>
              <h5 class='text-center capitalize'>
                Explore articles from my blog
              </h5>
            </div>
          </div>
          <div class='row categories'>
            <div class='six columns text-center centered'>
              <ul class='no-bullet'>

                <li>
                  <a href='/tags/git'>
                    Git
                  </a>
                </li>

                <li>
                  <a href='/tags/ruby'>
                    Ruby
                  </a>
                </li>

                <li>
                  <a href='/tags/clojure'>
                    Clojure
                  </a>
                </li>

                <li>
                  <a href='/tags/rspec'>
                    Rspec
                  </a>
                </li>

                <li>
                  <a href='/tags/minitest'>
                    Minitest
                  </a>
                </li>

              </ul>
            </div>
          </div>

          <div class='row'>
            <div class='six columns centered'>
              <form action="http://google.com/search" method="get">
                <fieldset role="search">
                  <input type="hidden" name="q" value="site:mattsears.com" />
                  <input class="search" type="text" name="q" results="0"
                  placeholder="... or search this site (via Google)"/>
                </fieldset>
              </form>
            </div>
          </div>
        </section>

        <section class='browse'>
          <div class='row'>
            <div class='ten columns centered'>
              <div class='row'>
                <div class='six mobile-four columns'>
                  <h5>
                    <b>
                      Popular:
                    </b>
                    The most visited articles:
                  </h5>
                  <hr />

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/12/10/minitest-quick-reference'>
                        Minitest Quick Reference
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>
                        Nyan Cat RSpec Formatter
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>
                        Ruby Blocks as Dynamic Callbacks
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2009/06/06/20-clojure-links-to-get-you-up-to-speed'>
                        20 Clojure Links To Get You Up To Speed
                      </a>
                    </div>
                  </div>

                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/10/12/gaga-key-value-store'>
                        Gaga, A Git-Backed Key/Value Store
                      </a>
                    </div>
                  </div>

                </div>
                <div class='six mobile-four columns'>
                  <h5>
                    <b>
                      New:
                    </b>
                    My most recent articles:
                  </h5>
                  <hr />

                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/12/10/minitest-quick-reference'>
                        Minitest Quick Reference
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/27/ruby-blocks-as-dynamic-callbacks'>
                        Ruby Blocks as Dynamic Callbacks
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/11/16/nyan-cat-rspec-formatter'>
                        Nyan Cat RSpec Formatter
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/10/12/gaga-key-value-store'>
                        Gaga, A Git-Backed Key/Value Store
                      </a>
                    </div>
                  </div>
                  
                  <hr />
                  <div class='row'>
                    <div class='nine columns cell'>
                      <a href='/articles/2011/05/15/print-stamps-with-ruby'>
                        Print Stamps With Ruby!
                      </a>
                    </div>
                  </div>
                  

                </div>
              </div>
            </div>
          </div>
        </section>

        <footer class='row text-center'>
          <div class='twelve columns'>
            <div class='row'>
              <div class='twelve columns'>
                <p>
                  You should follow me on
                  <a href="https://twitter.com/mattsears" rel="external">Twitter</a>
                  and subscribe to
                  my <a href='http://feeds.feedburner.com/mattsears'>RSS</a>
                  feed. Trust me.
                  <br />
                  Copyright &copy; 2012 Matt Sears.
                </p>
              </div>
            </div>
          </div>
        </footer>
      </div>
    </div>
    <script type='text/javascript'>
      //<![CDATA[
        var _gauges = _gauges || [];
        (function() {
          var t   = document.createElement('script');
          t.type  = 'text/javascript';
          t.async = true;
          t.id    = 'gauges-tracker';
          t.setAttribute('data-site-id', '4fb913d1f5a1f50be2000073');
          t.src = '//secure.gaug.es/track.js';
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(t, s);
        })();
      //]]>
    </script>
    <script src='/javascripts/foundation/jquery.js'></script>
    <script src='/javascripts/foundation/jquery.cookie.js'></script>
    <script src='/javascripts/foundation/jquery.event.move.js'></script>
    <script src='/javascripts/foundation/jquery.event.swipe.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.alerts.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.buttons.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.forms.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.mediaQueryToggle.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.navigation.js'></script>
    <script src='/javascripts/foundation/jquery.foundation.topbar.js'></script>
    <script src='/javascripts/foundation/jquery.placeholder.js'></script>
    <script src='/javascripts/foundation/app.js'></script>
  </body>
</html>
