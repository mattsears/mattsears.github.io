<html class="h-full antialiased js-focus-visible" data-js-focus-visible="" style="--header-position: sticky; --content-offset: 0px; --header-height: 64px; --header-mb: 0px; --avatar-image-transform: translate3d(0rem, 0, 0) scale(1); --avatar-border-transform: translate3d(-0.2222222222222222rem, 0, 0) scale(1.7777777777777777); --avatar-border-opacity: 0; --header-top: 0px; --avatar-top: 0px;" lang="en">
  <head>
  <meta charset="utf-8">

  
    <title>Matt Sears | Quick Wins to Improve Rails Performance</title>
  
  <link rel="icon" href="/assets/images/me.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <script src="/assets/builds/application.js"></script>
  <link href="/assets/builds/application.css" rel="stylesheet" type="text/css" media="all" />
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Quick Wins to Improve Rails Performance | Matt Sears</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Quick Wins to Improve Rails Performance" />
<meta name="author" content="Matt Sears" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="We’ve all most likely received that dreaded message about our Rails application being “too slow” or even worse “the page won’t load”. In a lot of cases, these issues are difficult to track down because likely it works fine on your development machine or the production server is working perfectly now. So we’re faced with the challenge of tracking down seemingly random bottlenecks that happened in the middle of the night." />
<meta property="og:description" content="We’ve all most likely received that dreaded message about our Rails application being “too slow” or even worse “the page won’t load”. In a lot of cases, these issues are difficult to track down because likely it works fine on your development machine or the production server is working perfectly now. So we’re faced with the challenge of tracking down seemingly random bottlenecks that happened in the middle of the night." />
<link rel="canonical" href="https://mattsears.com/articles/2019/08/10/quick-wins-to-improve-rails-performance/" />
<meta property="og:url" content="https://mattsears.com/articles/2019/08/10/quick-wins-to-improve-rails-performance/" />
<meta property="og:site_name" content="Matt Sears" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-08-10T00:00:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Quick Wins to Improve Rails Performance" />
<script type="application/ld+json">
{"description":"We’ve all most likely received that dreaded message about our Rails application being “too slow” or even worse “the page won’t load”. In a lot of cases, these issues are difficult to track down because likely it works fine on your development machine or the production server is working perfectly now. So we’re faced with the challenge of tracking down seemingly random bottlenecks that happened in the middle of the night.","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://mattsears.com/assets/images/me.png"},"name":"Matt Sears"},"url":"https://mattsears.com/articles/2019/08/10/quick-wins-to-improve-rails-performance/","headline":"Quick Wins to Improve Rails Performance","dateModified":"2019-08-10T00:00:00+00:00","datePublished":"2019-08-10T00:00:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mattsears.com/articles/2019/08/10/quick-wins-to-improve-rails-performance/"},"author":{"@type":"Person","name":"Matt Sears"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <body class="flex h-full flex-col bg-zinc-50 dark:bg-black">
    <div id="__next">
      <div class="fixed inset-0 flex justify-center sm:px-8">
        <div class="flex w-full max-w-7xl lg:px-8">
          <div class="w-full bg-white ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-300/20"></div>
        </div>
      </div>
      <div class="relative">
        <header class="pointer-events-none relative z-50 flex flex-col" style="height: 64px;">
  <div class="top-0 z-10 h-16 pt-6" style="position:var(--header-position)">
    <div class="sm:px-8 top-[var(--header-top,theme(spacing.6))] w-full" style="position:var(--header-inner-position)">
      <div class="mx-auto max-w-7xl lg:px-8">
        <div class="relative px-4 sm:px-8 lg:px-12">
          <div class="mx-auto max-w-2xl lg:max-w-5xl">
            <div class="relative flex gap-4">
              <div class="flex flex-1">
                <div class="h-10 w-10 rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:ring-white/10"><a aria-label="Home" class="pointer-events-auto" href="/">
                  <img alt="" sizes="2.25rem" srcset="" src="/assets/images/me.png" decoding="async" data-nimg="future" class="rounded-full bg-zinc-100 object-cover dark:bg-zinc-800 h-9 w-9" style="color: transparent;" width="512" height="512"></a></div>
              </div>
              <div class="flex flex-1 justify-end md:justify-center">
                <div class="pointer-events-auto md:hidden" data-headlessui-state="">
                  <button class="group flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-zinc-800 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10 dark:hover:ring-white/20" id="headlessui-popover-button-:Rqb6:" type="button" aria-expanded="false" data-headlessui-state="">
                    Menu
                    <svg viewBox="0 0 8 6" aria-hidden="true" class="ml-3 h-auto w-2 stroke-zinc-500 group-hover:stroke-zinc-700 dark:group-hover:stroke-zinc-400">
                      <path d="M1.75 1.75 4 4.25l2.25-2.5" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </div>
                
<nav class="pointer-events-auto hidden md:block">
  <ul class="flex rounded-full bg-white/90 px-3 text-sm font-medium text-zinc-800 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10">
    
    <li>
      <a class="relative block px-3 py-2 transition  hover:text-teal-500 dark:hover:text-teal-400  " href="/">
        Home
        
      </a>
    </li>
    
    <li>
      <a class="relative block px-3 py-2 transition  hover:text-teal-500 dark:hover:text-teal-400  " href="/about/">
        About
        
      </a>
    </li>
    
    <li>
      <a class="relative block px-3 py-2 transition  hover:text-teal-500 dark:hover:text-teal-400  " href="/articles/">
        Journal
        
      </a>
    </li>
    
    <li>
      <a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400 " href="#contact" data-name="matt" data-domain="mattsears" data-tld="com" onclick="window.location.href = 'mailto:' + this.dataset.name + '@' + this.dataset.domain + '.' + this.dataset.tld; return false;">Contact </a>
    </li>
  </ul>

</nav>



              </div>
              <div class="flex justify-end md:flex-1 ">
                <div class="pointer-events-auto ">
                  <button type="button"
                          aria-label="Toggle dark mode"
                          data-controller='toggle-mode'
                          data-action='click->toggle-mode#toggleMode'
                          class="group rounded-full bg-white/90 px-3 py-2 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20">
                    <svg viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="h-6 w-6 fill-zinc-100 stroke-zinc-500 transition group-hover:fill-zinc-200 group-hover:stroke-zinc-700 dark:hidden [@media(prefers-color-scheme:dark)]:fill-teal-50 [@media(prefers-color-scheme:dark)]:stroke-teal-500 [@media(prefers-color-scheme:dark)]:group-hover:fill-teal-50 [@media(prefers-color-scheme:dark)]:group-hover:stroke-teal-600">
                      <path d="M8 12.25A4.25 4.25 0 0 1 12.25 8v0a4.25 4.25 0 0 1 4.25 4.25v0a4.25 4.25 0 0 1-4.25 4.25v0A4.25 4.25 0 0 1 8 12.25v0Z"></path>
                      <path d="M12.25 3v1.5M21.5 12.25H20M18.791 18.791l-1.06-1.06M18.791 5.709l-1.06 1.06M12.25 20v1.5M4.5 12.25H3M6.77 6.77 5.709 5.709M6.77 17.73l-1.061 1.061" fill="none"></path>
                    </svg>
                    <svg viewBox="0 0 24 24" aria-hidden="true" class="hidden h-6 w-6 fill-zinc-700 stroke-zinc-500 transition dark:block [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-400 [@media_not_(prefers-color-scheme:dark)]:fill-teal-400/10 [@media_not_(prefers-color-scheme:dark)]:stroke-teal-500">
                      <path d="M17.25 16.22a6.937 6.937 0 0 1-9.47-9.47 7.451 7.451 0 1 0 9.47 9.47ZM12.75 7C17 7 17 2.75 17 2.75S17 7 21.25 7C17 7 17 11.25 17 11.25S17 7 12.75 7Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

        <main>
          <div class="sm:px-8 mt-16 lg:mt-32">
            <div class="mx-auto max-w-7xl lg:px-8">
              <div class="relative px-4 sm:px-8 lg:px-12">
                <div class="mx-auto max-w-2xl lg:max-w-5xl">
                  <div class="xl:relative">
                    <div class="mx-auto max-w-3xl">
                      
                      <a type="button" href="/articles/2020/04/03/scaling-ruby-on-rails-apps-with-kubernetes/" aria-label="Go back to articles" class=" group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:left-0 xl:mt-0">

                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75" />
                        </svg>
                      </a>
                      

                      
                      <a type="button" href="/articles/2018/11/30/how-to-make-actiontext-work-with-rails-5/" aria-label="" class="group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-right-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:right-0 xl:mt-0">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75" />
                        </svg>
                      </a>
                      


                      <article>
                        <header class="flex flex-col">
                          <h1 class="mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-4xl">
                            Quick Wins to Improve Rails Performance
                          </h1>
                          <time datetime="2019-08-10" class="order-first flex items-center text-base text-zinc-400 dark:text-zinc-500">
                            <span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
                            <span class="ml-3">August 10, 2019 </span>
                          </time>
                        </header>
                        <div class="mt-8 prose dark:prose-invert">
                          <p>We’ve all most likely received that dreaded message about our Rails application
being “too slow” or even worse “the page won’t load”. In a lot of cases, these
issues are difficult to track down because likely it works fine on your
development machine or the production server is working perfectly now. So we’re
faced with the challenge of tracking down seemingly random bottlenecks that
happened in the middle of the night.<!--more--></p>

<p>So what can we do to find this ghost in the machine on Monday morning? In this article, I will share a couple of “quick wins” that I’ve gathered over the years that’s helped me and my team quickly reduce page load times and get your Rails application back on the track quickly.</p>

<h3 id="1-get-a-copy-of-production-data-if-possible">1. Get a copy of production data (if possible)</h3>

<p>If it’s possible to get a copy of the production database, clone it into your local database and update the <code class="language-plaintext highlighter-rouge">database.yml</code> file to use it in your development environment. This isn’t always possible since the database may contain sensitive data or the size is just too large. If it is possible, do it. A lot of performance issues come from complicated queries with a lot of data and there’s no good way to replicate this in our local database.</p>

<h3 id="2-you-only-need-two-tools">2. You only need two tools</h3>

<p>Fortunately for us, there are quite a few tools at our disposal, but I found that only two is all we need to get us going.</p>

<ol>
  <li>
    <p><a href="https://github.com/MiniProfiler/rack-mini-profiler">rack-mini-profiler</a> This is perhaps the most useful tool we have in our arsenal. It gives us immediate insight into how long your database queries are taking, how fast are views are rendering, how much memory is being used, and much more. And the kicker is that we can use this tool in production to get real results from real data, especially if we’re not able to get our hands on the production data.</p>
  </li>
  <li>
    <p><a href="https://www.skylight.io">Skylight</a> I like Skylight because the UI makes it easy to digest a lot of data that comes from a single call to a controller action - making it easy to find the action that’s taking the longest to process the request. While Skylight works to collect data in production, we can start looking at performance locally. As we release code updates to production, we will easily be able to see if our updates are helping with Skylight’s trends and Grading system.</p>
  </li>
</ol>

<h3 id="3-lets-dig-in-with-rack-mini-profiler">3. Let’s dig in with rack-mini-profiler</h3>

<p>Hopefully, now we have some data to work with, we can use rack-mini-profiler immediately to track down bottlenecks on our local development machine or production if necessary since rack-mini-profile was designed to work in production too. After poking around the site, it tells me that it’s taking 2 seconds to load the user index page:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Executing</span> <span class="ss">action: </span><span class="n">show</span>                               <span class="mf">172.6</span>   <span class="o">+</span><span class="mf">408.0</span>  <span class="mi">122</span> <span class="n">sql</span>  <span class="mf">62.2</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="sr">/users/s</span><span class="n">how</span>                           <span class="mf">333.3</span>   <span class="o">+</span><span class="mf">580.0</span>  <span class="mi">112</span> <span class="n">sql</span> <span class="mf">84.4</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="sr">/users/mo</span><span class="n">dals</span><span class="o">/</span><span class="n">_put_student_on_l</span><span class="o">...</span>    <span class="mf">3.8</span>     <span class="o">+</span><span class="mf">634.0</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="sr">/users/</span><span class="n">_user_header</span>                   <span class="mf">3.1</span>     <span class="o">+</span><span class="mf">648.0</span>  <span class="mi">1</span> <span class="n">sql</span>   <span class="mf">0.4</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="sr">/users/</span><span class="n">_warn_on_wrong_universit</span><span class="o">...</span>    <span class="mf">5.3</span>     <span class="o">+</span><span class="mf">655.0</span>  <span class="mi">1</span> <span class="n">sql</span>   <span class="mf">1.4</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="sr">/users/</span><span class="n">_system_actions</span>                <span class="mf">39.3</span>    <span class="o">+</span><span class="mf">733.0</span>  <span class="mi">1</span> <span class="n">sql</span>   <span class="mf">34.8</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="sr">/users/mo</span><span class="n">dals</span><span class="o">/</span><span class="n">_withdrawal</span>             <span class="mf">6.9</span>     <span class="o">+</span><span class="mf">872.0</span>  <span class="mi">1</span> <span class="n">sql</span>   <span class="mf">0.6</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="n">attachables</span><span class="o">/</span><span class="n">_list</span>                     <span class="mf">33.6</span>    <span class="o">+</span><span class="mf">968.0</span>  <span class="mi">3</span> <span class="n">sql</span>   <span class="mf">0.9</span>
    <span class="no">Rendering</span><span class="p">:</span> <span class="n">user</span><span class="o">/</span><span class="n">_notes</span>                           <span class="mf">64.0</span>    <span class="o">+</span><span class="mf">1010.0</span> <span class="mi">2</span> <span class="n">sql</span>   <span class="mf">11.3</span>
</code></pre></div></div>

<p>Holy smokes! This page is running 100+ queries on a single page.</p>

<h3 id="quick-win-eager-loading">Quick win: Eager loading</h3>

<p>We work mostly with Rails’ ActiveRecord when it comes to getting data. And it’s great. but I see a lot developers often don’t pay attention to the number of database queries since we’re just writing Ruby. But the amount of queries can really ad up quickly. Looking that the logs we see the following:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"users"</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">108</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">111</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">2332</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">2323</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">3415</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">345</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">535</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"id"</span> <span class="o">=</span> <span class="mi">4565</span><span class="p">;</span>
</code></pre></div></div>

<p>We can fix this with eager loading by telling Rails to more or less pre-load associations ahead of time since we know we will need them in our views. This is a small, quick and fairly safe tweak we can make throughout the application.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">users</span> <span class="o">=</span> <span class="no">Users</span><span class="p">.</span><span class="nf">active</span><span class="p">.</span><span class="nf">includes</span><span class="p">(</span><span class="ss">:notes</span><span class="p">).</span><span class="nf">limit</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
</code></pre></div></div>

<p>This tells Rails to include <code class="language-plaintext highlighter-rouge">notes</code> in our query for <code class="language-plaintext highlighter-rouge">users</code>. Now our query looks like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"users"</span> <span class="no">LIMIT</span> <span class="mi">100</span><span class="p">;</span>
<span class="no">SELECT</span> <span class="o">*</span> <span class="n">from</span> <span class="s2">"notes"</span> <span class="no">WHERE</span> <span class="s2">"user_id"</span> <span class="no">IN</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">108</span><span class="p">,</span><span class="mi">111</span><span class="p">,</span><span class="mi">2332</span><span class="p">,</span><span class="mi">2323</span><span class="o">...</span><span class="p">);</span>
</code></pre></div></div>

<p>This reduces the number of sql queries to just 12 - shaving a full second off the page load time! Not bad for a simple 1-line change. Of course, there’s more we can do. I mean, one second page load time is still too long, but at least now our users will see some improvement and save our database countless cpu cycles. We repeat this process on every heave loading page we can find and deploy our updates as soon as possible.</p>

<h3 id="lets-check-skylight">Let’s check Skylight</h3>

<p>Meanwhile, Skylight has been collecting data for us and we can start to see some problems bubble up to the service. One thing that immediately sticks out is Skylight says the <code class="language-plaintext highlighter-rouge">Dashboard#index</code> is allocating a lot of objects for one page. The load time is only 600 mili-seconds which isn’t too bad, but this particular page is popular and being called a lot. This is something that we missed locally because only one user testing the application…me!</p>

<h3 id="quick-win-less-looping">Quick win: Less looping</h3>

<p>The dashboard is loading every user in the database and rendering hundreds of partials. We can cut this down by immediately by paginating our database results and limiting the amount of looping from 200+ to 25 at time. Also, we can make sure we’re only getting the data we need by adding a couple of scopes. This will only return active users and ensure we’re not returning duplicates too.</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="vi">@users</span> <span class="o">=</span> <span class="no">User</span><span class="p">.</span><span class="nf">distinct</span><span class="p">.</span><span class="nf">active</span><span class="p">.</span><span class="nf">order</span><span class="p">(</span><span class="ss">:name</span><span class="p">).</span><span class="nf">page</span> <span class="n">params</span><span class="p">[</span><span class="ss">:page</span><span class="p">]</span>
</code></pre></div></div>

<p>If we take a closer look at the Dashboard views, we can see that we’re rendering our user data into a shared partial using a collection. Fortunately, Rails makes it incredibly easy to cache views. In the case, we simply add <code class="language-plaintext highlighter-rouge">cached: true</code> at the end like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">&lt;</span><span class="sx">%= render partial: 'user', collection: @users, cached: true %&gt;
</span></code></pre></div></div>

<p>Boom, we are now caching partials automatically - now all partials will be written and fetched from our cache - greatly improving our rendering times. We can, again, add this to other pages where heavy-object allocation is happening - thanks Skylight for pointing that out to us!</p>

<p>Alright, so with a couple of hours of debugging and tweaking, we can push out some quick updates to our production server to get things moving faster again. There is, of course, more to be done, but with using the tips described above, we can get our Rails application running quickly while we formulate a plan for an overall performance upgrade effort.</p>

                        </div>
                      </article>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
        
<footer class="mt-24">
  <div class="sm:px-8">
    <div class="mx-auto max-w-7xl lg:px-8">
      <div class="border-t border-zinc-100 pt-10 pb-16 dark:border-zinc-700/40">
        <div class="relative px-4 sm:px-8 lg:px-12">
          <div class="mx-auto max-w-2xl lg:max-w-5xl">
            <div class="flex flex-col items-center justify-between gap-6 sm:flex-row">
              <div class="flex gap-6 text-sm font-medium text-zinc-800 dark:text-zinc-200">
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/">Home</a>
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/about">About</a>
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/work">Work</a>
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/articles">Journal</a>
              </div>
              <p class="text-sm text-zinc-400 dark:text-zinc-500">
                © 2023 Matt Sears. All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

      </div>
    </div>
  </body>
</html>
