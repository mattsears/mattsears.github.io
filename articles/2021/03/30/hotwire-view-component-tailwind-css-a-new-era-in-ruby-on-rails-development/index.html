<html class="h-full antialiased js-focus-visible" data-js-focus-visible="" style="--header-position: sticky; --content-offset: 0px; --header-height: 64px; --header-mb: 0px; --avatar-image-transform: translate3d(0rem, 0, 0) scale(1); --avatar-border-transform: translate3d(-0.2222222222222222rem, 0, 0) scale(1.7777777777777777); --avatar-border-opacity: 0; --header-top: 0px; --avatar-top: 0px;" lang="en">
  <head>
  <meta charset="utf-8">

  
    <title>Matt Sears | Hotwire, ViewComponent, and TailwindCSS: A New Era in Ruby On Rails Development</title>
  
  <link rel="icon" href="/assets/images/me.png" type="image/x-icon" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open Sans">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <script src="/assets/builds/application.js"></script>
  <link href="/assets/builds/application.css" rel="stylesheet" type="text/css" media="all" />
  <!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Hotwire, ViewComponent, and TailwindCSS: A New Era in Ruby On Rails Development | Matt Sears</title>
<meta name="generator" content="Jekyll v4.2.0" />
<meta property="og:title" content="Hotwire, ViewComponent, and TailwindCSS: A New Era in Ruby On Rails Development" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="The world has changed a lot in the past year, no doubt. This includes some big changes on how we will build Ruby on Rails applications going forward. Late last year, the Basecamp/Hey team released Hotwire, a new way how our front-end and back-end code work together. Hotwire is a collection of tools that allows to build single-page (like) apps with much less Javascript. Most notable tool in Hotwire’s collection is Turbo, which provides most of the plumbing for delivering html to the browser without full-page reloads." />
<meta property="og:description" content="The world has changed a lot in the past year, no doubt. This includes some big changes on how we will build Ruby on Rails applications going forward. Late last year, the Basecamp/Hey team released Hotwire, a new way how our front-end and back-end code work together. Hotwire is a collection of tools that allows to build single-page (like) apps with much less Javascript. Most notable tool in Hotwire’s collection is Turbo, which provides most of the plumbing for delivering html to the browser without full-page reloads." />
<link rel="canonical" href="https://mattsears.com/articles/2021/03/30/hotwire-view-component-tailwind-css-a-new-era-in-ruby-on-rails-development/" />
<meta property="og:url" content="https://mattsears.com/articles/2021/03/30/hotwire-view-component-tailwind-css-a-new-era-in-ruby-on-rails-development/" />
<meta property="og:site_name" content="Matt Sears" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2021-03-30T17:11:00+00:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Hotwire, ViewComponent, and TailwindCSS: A New Era in Ruby On Rails Development" />
<script type="application/ld+json">
{"description":"The world has changed a lot in the past year, no doubt. This includes some big changes on how we will build Ruby on Rails applications going forward. Late last year, the Basecamp/Hey team released Hotwire, a new way how our front-end and back-end code work together. Hotwire is a collection of tools that allows to build single-page (like) apps with much less Javascript. Most notable tool in Hotwire’s collection is Turbo, which provides most of the plumbing for delivering html to the browser without full-page reloads.","@type":"BlogPosting","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"https://mattsears.com/assets/images/me.png"}},"url":"https://mattsears.com/articles/2021/03/30/hotwire-view-component-tailwind-css-a-new-era-in-ruby-on-rails-development/","headline":"Hotwire, ViewComponent, and TailwindCSS: A New Era in Ruby On Rails Development","dateModified":"2021-03-30T17:11:00+00:00","datePublished":"2021-03-30T17:11:00+00:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mattsears.com/articles/2021/03/30/hotwire-view-component-tailwind-css-a-new-era-in-ruby-on-rails-development/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->

</head>

  <body class="flex h-full flex-col bg-zinc-50 dark:bg-black">
    <div id="__next">
      <div class="fixed inset-0 flex justify-center sm:px-8">
        <div class="flex w-full max-w-7xl lg:px-8">
          <div class="w-full bg-white ring-1 ring-zinc-100 dark:bg-zinc-900 dark:ring-zinc-300/20"></div>
        </div>
      </div>
      <div class="relative">
        <header class="pointer-events-none relative z-50 flex flex-col" style="height: 64px;">
  <div class="top-0 z-10 h-16 pt-6" style="position:var(--header-position)">
    <div class="sm:px-8 top-[var(--header-top,theme(spacing.6))] w-full" style="position:var(--header-inner-position)">
      <div class="mx-auto max-w-7xl lg:px-8">
        <div class="relative px-4 sm:px-8 lg:px-12">
          <div class="mx-auto max-w-2xl lg:max-w-5xl">
            <div class="relative flex gap-4">
              <div class="flex flex-1">
                <div class="h-10 w-10 rounded-full bg-white/90 p-0.5 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:ring-white/10"><a aria-label="Home" class="pointer-events-auto" href="/">
                  <img alt="" sizes="2.25rem" srcset="" src="/assets/images/me.png" decoding="async" data-nimg="future" class="rounded-full bg-zinc-100 object-cover dark:bg-zinc-800 h-9 w-9" style="color: transparent;" width="512" height="512"></a></div>
              </div>
              <div class="flex flex-1 justify-end md:justify-center">
                <div class="pointer-events-auto md:hidden" data-headlessui-state="">
                  <button class="group flex items-center rounded-full bg-white/90 px-4 py-2 text-sm font-medium text-zinc-800 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10 dark:hover:ring-white/20" id="headlessui-popover-button-:Rqb6:" type="button" aria-expanded="false" data-headlessui-state="">
                    Menu
                    <svg viewBox="0 0 8 6" aria-hidden="true" class="ml-3 h-auto w-2 stroke-zinc-500 group-hover:stroke-zinc-700 dark:group-hover:stroke-zinc-400">
                      <path d="M1.75 1.75 4 4.25l2.25-2.5" fill="none" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </div>
                
<nav class="pointer-events-auto hidden md:block">
  <ul class="flex rounded-full bg-white/90 px-3 text-sm font-medium text-zinc-800 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur dark:bg-zinc-800/90 dark:text-zinc-200 dark:ring-white/10">
    
    <li>
      <a class="relative block px-3 py-2 transition  hover:text-teal-500 dark:hover:text-teal-400  " href="/">
        Home
        
      </a>
    </li>
    
    <li>
      <a class="relative block px-3 py-2 transition  hover:text-teal-500 dark:hover:text-teal-400  " href="/about/">
        About
        
      </a>
    </li>
    
    <li>
      <a class="relative block px-3 py-2 transition  hover:text-teal-500 dark:hover:text-teal-400  " href="/articles/">
        Journal
        
      </a>
    </li>
    
    <li>
      <a class="relative block px-3 py-2 transition hover:text-teal-500 dark:hover:text-teal-400 " href="#contact" data-name="matt" data-domain="mattsears" data-tld="com" onclick="window.location.href = 'mailto:' + this.dataset.name + '@' + this.dataset.domain + '.' + this.dataset.tld; return false;">Contact </a>
    </li>
  </ul>

</nav>



              </div>
              <div class="flex justify-end md:flex-1 ">
                <div class="pointer-events-auto ">
                  <button type="button"
                          aria-label="Toggle dark mode"
                          data-controller='toggle-mode'
                          data-action='click->toggle-mode#toggleMode'
                          class="group rounded-full bg-white/90 px-3 py-2 shadow-lg shadow-zinc-800/5 ring-1 ring-zinc-900/5 backdrop-blur transition dark:bg-zinc-800/90 dark:ring-white/10 dark:hover:ring-white/20">
                    <svg viewBox="0 0 24 24" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true" class="h-6 w-6 fill-zinc-100 stroke-zinc-500 transition group-hover:fill-zinc-200 group-hover:stroke-zinc-700 dark:hidden [@media(prefers-color-scheme:dark)]:fill-teal-50 [@media(prefers-color-scheme:dark)]:stroke-teal-500 [@media(prefers-color-scheme:dark)]:group-hover:fill-teal-50 [@media(prefers-color-scheme:dark)]:group-hover:stroke-teal-600">
                      <path d="M8 12.25A4.25 4.25 0 0 1 12.25 8v0a4.25 4.25 0 0 1 4.25 4.25v0a4.25 4.25 0 0 1-4.25 4.25v0A4.25 4.25 0 0 1 8 12.25v0Z"></path>
                      <path d="M12.25 3v1.5M21.5 12.25H20M18.791 18.791l-1.06-1.06M18.791 5.709l-1.06 1.06M12.25 20v1.5M4.5 12.25H3M6.77 6.77 5.709 5.709M6.77 17.73l-1.061 1.061" fill="none"></path>
                    </svg>
                    <svg viewBox="0 0 24 24" aria-hidden="true" class="hidden h-6 w-6 fill-zinc-700 stroke-zinc-500 transition dark:block [@media(prefers-color-scheme:dark)]:group-hover:stroke-zinc-400 [@media_not_(prefers-color-scheme:dark)]:fill-teal-400/10 [@media_not_(prefers-color-scheme:dark)]:stroke-teal-500">
                      <path d="M17.25 16.22a6.937 6.937 0 0 1-9.47-9.47 7.451 7.451 0 1 0 9.47 9.47ZM12.75 7C17 7 17 2.75 17 2.75S17 7 21.25 7C17 7 17 11.25 17 11.25S17 7 12.75 7Z" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</header>

        <main>
          <div class="sm:px-8 mt-16 lg:mt-32">
            <div class="mx-auto max-w-7xl lg:px-8">
              <div class="relative px-4 sm:px-8 lg:px-12">
                <div class="mx-auto max-w-2xl lg:max-w-5xl">
                  <div class="xl:relative">
                    <div class="mx-auto max-w-3xl">
                      
                      <a type="button" href="/articles/2021/04/25/two-simple-books-to-wealth/" aria-label="Go back to articles" class=" group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-left-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:left-0 xl:mt-0">

                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 12h-15m0 0l6.75 6.75M4.5 12l6.75-6.75" />
                        </svg>
                      </a>
                      

                      
                      <a type="button" href="/articles/2021/02/07/writing-ruby-commands-with-mutations-gem/" aria-label="" class="group mb-8 flex h-10 w-10 items-center justify-center rounded-full bg-white shadow-md shadow-zinc-800/5 ring-1 ring-zinc-900/5 transition dark:border dark:border-zinc-700/50 dark:bg-zinc-800 dark:ring-0 dark:ring-white/10 dark:hover:border-zinc-700 dark:hover:ring-white/20 lg:absolute lg:-right-5 lg:mb-0 lg:-mt-2 xl:-top-1.5 xl:right-0 xl:mt-0">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-4 w-4 stroke-zinc-500 transition group-hover:stroke-zinc-700 dark:stroke-zinc-500 dark:group-hover:stroke-zinc-400">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75" />
                        </svg>
                      </a>
                      


                      <article>
                        <header class="flex flex-col">
                          <h1 class="mt-6 text-4xl font-bold tracking-tight text-zinc-800 dark:text-zinc-100 sm:text-4xl">
                            Hotwire, ViewComponent, and TailwindCSS: A New Era in Ruby On Rails Development
                          </h1>
                          <time datetime="2021-03-30" class="order-first flex items-center text-base text-zinc-400 dark:text-zinc-500">
                            <span class="h-4 w-0.5 rounded-full bg-zinc-200 dark:bg-zinc-500"></span>
                            <span class="ml-3">March 30, 2021 </span>
                          </time>
                        </header>
                        <div class="mt-8 prose dark:prose-invert">
                          <p>The world has changed a lot in the past year, no doubt. This includes some big
changes on how we will build Ruby on Rails applications going forward. Late last
year, the Basecamp/Hey team released <a href="https://hotwire.dev/">Hotwire</a>, a new way
how our front-end and back-end code work together. Hotwire is a collection of
tools that allows to build single-page (like) apps with much less
Javascript. Most notable tool in Hotwire’s collection is
<a href="https://turbo.hotwire.dev/">Turbo</a>, which provides most of the plumbing for
delivering html to the browser without full-page reloads. <!--more--> When
paired with <a href="https://stimulus.hotwire.dev/">Stimulus</a>, we can sprinkle in a
little Javascript into your HTML and make our apps really responsive.</p>

<p><img src="/assets/images/generated/hotwire-new-era-800-cf7135b6d.jpg" srcset="/assets/images/generated/hotwire-new-era-400-cf7135b6d.jpg 400w, /assets/images/generated/hotwire-new-era-600-cf7135b6d.jpg 600w, /assets/images/generated/hotwire-new-era-800-cf7135b6d.jpg 800w, /assets/images/generated/hotwire-new-era-1000-cf7135b6d.jpg 1000w" /></p>

<p>On the west coast, The Github team is working on a new technique for building
user interface components called
<a href="https://viewcomponent.org/">ViewComponent</a>. With this gem, we can say to
goodbye to logic-ridden partials and replace them with smaller, bite-size
nuggets of common user interface elements such has buttons, links, flashes,
popups, and more.</p>

<p>And then we have <a href="https://tailwindcss.com/">TailwindCSS</a>, a CSS framework that
is design to work in html classes instead of traditional CSS stylesheets. With
Tailwind, you style elements by applying pre-existing classes directly in the
HTML. This can take a little getting use to, since if you’re like me, I’ve been
knee deep in stylesheets for over twenty years. But after working with Tailwind
for just a little while, it’s a game changer. You’re able to build out nice
looking interfaces without even creating a CSS file.</p>

<p>An overwriting common theme these tools have is <em>we’re working more directly in
the html</em>. We’re able to build great looking websites with function by just
adding attributes and elements. This eliminates a ton of Javascript and CSS
files, that let’s face it, hindered productivity. I’ve been working with these
three tools for a few months now and it’s feels like I finally have a great way
to organize and test user interfaces like never before.</p>

<p>To illustrate the power of these three tools, I’m going to show you how to make
any normal link fetch the results from the server and display the results in a
popup modal box. Meaning, the application will make a request to the address
specified in the <code class="language-plaintext highlighter-rouge">href</code> attribute, the server will render the html, and the
browser will display the html in a popup - all without full page refresh and
very little Javascript. For example, let’s start with this <code class="language-plaintext highlighter-rouge">link_to</code>:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Edit Profile"</span><span class="p">,</span> <span class="s1">'/profile'</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="s2">"turbo-frame"</span><span class="p">:</span> <span class="s2">"popup_modal"</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>It’s a normal plain link, with one exception of the <code class="language-plaintext highlighter-rouge">data-turbo-frame</code>
attribute. When we assign this attribute to a link, it essentially tells Turbo
to intercept the click on <code class="language-plaintext highlighter-rouge">&lt;a href&gt;</code> and prevents the browser from
following it, instead makes a requests to <code class="language-plaintext highlighter-rouge">/profile</code> on the server using fetch, and then
renders the HTML response inside the <code class="language-plaintext highlighter-rouge">turbo-frame</code>. You can learn more about
this on the Turbo’s handbook in the section <a href="https://turbo.hotwire.dev/handbook/introduction#turbo-drive-navigate-within-a-persistent-process">Turbo Drive: Navigate within a
persistent
process</a></p>

<p>The <code class="language-plaintext highlighter-rouge">turbo-frame</code> we want in question is our popup modal. We’re going to use
<em>just one</em> view component for all of our popups. Meaning we will not be required
to wrap the <code class="language-plaintext highlighter-rouge">/profile</code> html around a modal on the server - freeing us to use
view in other ways if we choose too.</p>

<p>Okay, first let’s build our view component for our modal popup. Below are three files we need.</p>

<ol>
  <li>
    <p>The ruby code for our component. In this case, we’re just accepting the name of the component which we will in turn use in our template.</p>

    <div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c1"># app/components/modal_component.rb</span>

 <span class="k">class</span> <span class="nc">ModalComponent</span> <span class="o">&lt;</span> <span class="no">ViewComponent</span><span class="o">::</span><span class="no">Base</span>

   <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="nb">name</span><span class="p">:)</span>
     <span class="vi">@name</span> <span class="o">=</span> <span class="nb">name</span>
   <span class="k">end</span>

 <span class="k">end</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>The html code for our component. Notice the <code class="language-plaintext highlighter-rouge">&lt;turbo-frame&gt;</code> element. We’re assign the id of the frame to the name we pass into our component.</p>

    <div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="c">&lt;!-- app/components/modal_component.html.erb --&gt;</span>
 <span class="nt">&lt;div</span> <span class="na">data-controller=</span><span class="s">"modal-component"</span><span class="nt">&gt;</span>
   <span class="nt">&lt;div</span> <span class="na">data-popup--modal-target=</span><span class="s">"container"</span>
        <span class="na">data-action=</span><span class="s">"click-&gt;modal-component#closeBackground keyup@window-&gt;modal-component#closeWithKeyboard"</span>
        <span class="na">class=</span><span class="s">"hidden absolute transform transition-all inset-32 overflow-y-auto flex justify-center"</span> <span class="na">style=</span><span class="s">"z-index: 9999;"</span><span class="nt">&gt;</span>
     <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"max-h-screen w-full relative"</span><span class="nt">&gt;</span>
       <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"bg-white rounded-md shadow pt-3"</span><span class="nt">&gt;</span>
         <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hidden sm:block absolute top-0 right-0 pt-4 pr-4"</span><span class="nt">&gt;</span>
           <span class="nt">&lt;button</span> <span class="na">type=</span><span class="s">"button"</span> <span class="na">class=</span><span class="s">"btn-round"</span> <span class="na">data-action=</span><span class="s">"click-&gt;modal-component#close"</span><span class="nt">&gt;</span>
             <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">"sr-only"</span><span class="nt">&gt;</span>X<span class="nt">&lt;/span&gt;</span>
           <span class="nt">&lt;/button&gt;</span>
         <span class="nt">&lt;/div&gt;</span>
         <span class="nt">&lt;turbo-frame</span> <span class="na">id=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="vi">@name</span> <span class="cp">%&gt;</span><span class="s">"</span> <span class="na">data-modal-component-target=</span><span class="s">"frame"</span> <span class="na">src=</span><span class="s">""</span> <span class="na">target=</span><span class="s">"_top"</span><span class="nt">&gt;&lt;/turbo-frame&gt;</span>
       <span class="nt">&lt;/div&gt;</span>
     <span class="nt">&lt;/div&gt;</span>
   <span class="nt">&lt;/div&gt;</span>
 <span class="nt">&lt;/div&gt;</span>
</code></pre></div>    </div>
  </li>
  <li>
    <p>And the Javascript we need to do basic things with our modal like dismissing and the actual popping.</p>
  </li>
</ol>

<div class="language-js highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// app/components/modal_component_controller.js</span>

<span class="k">import</span> <span class="p">{</span> <span class="nx">Controller</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">stimulus</span><span class="dl">'</span><span class="p">;</span>

<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="kd">extends</span> <span class="nx">Controller</span> <span class="p">{</span>
  <span class="kd">static</span> <span class="nx">targets</span> <span class="o">=</span> <span class="p">[</span><span class="dl">'</span><span class="s1">container</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">frame</span><span class="dl">'</span><span class="p">,</span> <span class="dl">'</span><span class="s1">loader</span><span class="dl">'</span><span class="p">];</span>

  <span class="nx">connect</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">MutationObserver</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frameMutated</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">))</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frameTarget</span><span class="p">,</span> <span class="p">{</span> <span class="na">attributes</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span> <span class="na">childList</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="na">characterData</span><span class="p">:</span> <span class="kc">false</span>   <span class="p">})</span>

    <span class="c1">// The HTML for the background element</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">backgroundHtml</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">_backgroundHTML</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">disconnect</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">observer</span><span class="p">.</span><span class="nx">disconnect</span><span class="p">()</span>
    <span class="k">delete</span> <span class="k">this</span><span class="p">.</span><span class="nx">observer</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">();</span>
  <span class="p">}</span>

  <span class="nx">frameMutated</span> <span class="p">()</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">frameTarget</span><span class="p">.</span><span class="nx">hasAttribute</span><span class="p">(</span><span class="dl">'</span><span class="s1">busy</span><span class="dl">'</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">loaderTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">open</span><span class="p">();</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">loaderTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">'</span><span class="s1">hidden</span><span class="dl">'</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">open</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">// Insert the background</span>
    <span class="nb">document</span><span class="p">.</span><span class="nx">body</span><span class="p">.</span><span class="nx">insertAdjacentHTML</span><span class="p">(</span><span class="dl">'</span><span class="s1">beforeend</span><span class="dl">'</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">backgroundHtml</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s2">`#</span><span class="p">${</span><span class="k">this</span><span class="p">.</span><span class="nx">backgroundId</span><span class="p">}</span><span class="s2">`</span><span class="p">);</span>

    <span class="c1">// Unhide the modal</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">containerTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">remove</span><span class="p">(</span><span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">close</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="c1">// Hide the modal</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">containerTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">add</span><span class="p">(</span><span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">);</span>

    <span class="c1">// Remove the background</span>
    <span class="k">if</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">background</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">background</span><span class="p">.</span><span class="nx">remove</span><span class="p">();</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">background</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">frameTarget</span><span class="p">.</span><span class="nx">innerHTML</span> <span class="o">=</span> <span class="dl">""</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">closeBackground</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span> <span class="o">===</span> <span class="k">this</span><span class="p">.</span><span class="nx">containerTarget</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">closeWithKeyboard</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">keyCode</span> <span class="o">===</span> <span class="mi">27</span> <span class="o">&amp;&amp;</span> <span class="o">!</span><span class="k">this</span><span class="p">.</span><span class="nx">containerTarget</span><span class="p">.</span><span class="nx">classList</span><span class="p">.</span><span class="nx">contains</span><span class="p">(</span><span class="dl">"</span><span class="s2">hidden</span><span class="dl">"</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">close</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">_backgroundHTML</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="dl">'</span><span class="s1">&lt;div id="modal-background" class="fixed top-0 left-0 w-full h-full " style="background-color: rgba(0, 0, 0, 0.4); z-index: 98;"&gt;&lt;/div&gt;</span><span class="dl">'</span><span class="p">;</span>
  <span class="p">}</span>
<span class="p">}</span>

</code></pre></div></div>

<p>This is standard Javascript for handling popups, with on exception: We need the
popup to appear when it’s contents change. At the time of the writing of this
post, there is no way to trigger events on the front-end when Turbo completes
it’s request. So when Turbo replaces the contents with the response from
<code class="language-plaintext highlighter-rouge">/profile</code>, we need that to trigger the popup to, <em>popup</em>.</p>

<p>With our new view component, we can call component in our application layout just before the end of <code class="language-plaintext highlighter-rouge">&lt;/body&gt;</code> element:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- /app/views/layouts/application.html.erb --&gt;</span>
   ...
  <span class="cp">&lt;%=</span> <span class="n">render</span><span class="p">(</span><span class="no">ModalComponent</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="ss">name: </span><span class="s2">"popup_modal"</span><span class="p">))</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/body&gt;</span>
</code></pre></div></div>

<p>With that we have a nice popup modal styled with Tailwind and organized as a
View Component ready to respond when it’s content is changed. Buried in this
popup is the <code class="language-plaintext highlighter-rouge">turbo-frame</code> with the same id as the target in the link <code class="language-plaintext highlighter-rouge">&lt;%=
link_to "Edit Profile", '/profile', data: { "turbo-frame": "popup_modal" }
%&gt;</code>. With this link, Turbo will make a request to <code class="language-plaintext highlighter-rouge">/profile</code>, render the html on
the server, and return the response inside the turbo-frame (matching the
‘popup_modal’ id) that we declared in our component.</p>

<p>The last piece of the puzzle is the server-side code. In our show action, we
simply just need to declare <code class="language-plaintext highlighter-rouge">turbo_stream</code> format like this:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">class</span> <span class="nc">ProfileController</span> <span class="o">&lt;</span> <span class="no">ApplicationController</span>
  <span class="o">...</span>

  <span class="k">def</span> <span class="nf">show</span>
    <span class="n">respond_to</span> <span class="k">do</span> <span class="o">|</span><span class="nb">format</span><span class="o">|</span>
      <span class="nb">format</span><span class="p">.</span><span class="nf">turbo_stream</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div></div>

<p>Then in our turbo_stream template, we instruct turbo to
<a href="https://github.com/hotwired/turbo-rails/blob/main/app/models/turbo/streams/tag_builder.rb#L56">update</a>
the contents of the “popup_modal” turbo-frame, to update the contents with the
html inside the block:</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- /app/views/profiles/show.turbo_stream.erb --&gt;</span>

<span class="cp">&lt;%=</span> <span class="n">turbo_stream</span><span class="p">.</span><span class="nf">update</span> <span class="s2">"popup_modal"</span> <span class="k">do</span> <span class="cp">%&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden transform transition-all sm:my-9 sm:align-middle sm:w-full sm:p-6"</span> <span class="na">role=</span><span class="s">"dialog"</span> <span class="na">aria-modal=</span><span class="s">"true"</span> <span class="na">aria-labelledby=</span><span class="s">"modal-headline"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"sm:flex sm:items-start"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;h3</span> <span class="na">class=</span><span class="s">"text-lg leading-6 font-medium text-gray-900"</span> <span class="na">id=</span><span class="s">"modal-headline"</span><span class="nt">&gt;</span>
          Hello from the server!
        <span class="nt">&lt;/h3&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"mt-2"</span><span class="nt">&gt;</span>
          <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">"text-sm text-gray-500"</span><span class="nt">&gt;</span>
            This HTML was rendered on the server and sent over the wire with Hotwire.
          <span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>When this is returned from the server, Turbo on the front-end will update the
contents in our <code class="language-plaintext highlighter-rouge">&lt;turbo-frame id="popup_modal"...&lt;/turbo-frame&gt;</code> that we’ve
declared inside our view template that resides at the bottom of the application
layout. In our Stimulus controller
<code class="language-plaintext highlighter-rouge">app/components/modal_component_controller.js</code> (shown above), we’ve included a
<code class="language-plaintext highlighter-rouge">MutationObserver</code> that basically watches to see if any of the html code
changes. When it does, it will <em>popup</em> our modal. Let’s see it in action:</p>

<p><img src="/assets/images/journal/hotwire.gif" alt="Watch Rich Text Editor in action" /></p>

<p>So now whenever we want to display content in a popup, we just need to add the
<code class="language-plaintext highlighter-rouge">data: { "turbo-frame": "popup_modal" }</code> data attribute to any link and it will
magically work - no extra code necessary.</p>

<div class="language-erb highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">&lt;!-- Display the sign up page in a popup --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Sign Up"</span><span class="p">,</span> <span class="err">'</span><span class="o">/</span><span class="n">sign_up</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="s2">"turbo-frame"</span><span class="p">:</span> <span class="s2">"popup_modal"</span> <span class="p">}</span> <span class="cp">%&gt;</span>

<span class="c">&lt;!-- Display the login form in a popup --&gt;</span>
<span class="cp">&lt;%=</span> <span class="n">link_to</span> <span class="s2">"Login"</span><span class="p">,</span> <span class="err">'</span><span class="o">/</span><span class="n">login</span><span class="p">,</span> <span class="ss">data: </span><span class="p">{</span> <span class="s2">"turbo-frame"</span><span class="p">:</span> <span class="s2">"popup_modal"</span> <span class="p">}</span> <span class="cp">%&gt;</span>
</code></pre></div></div>

<p>I know this is a lot to digest and there’s a lot I didn’t cover. I will continue to write more about Hotwire in the
very near future as I’m very excited about it’s possibilities. Check back soon!</p>

                        </div>
                      </article>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
        
<footer class="mt-24">
  <div class="sm:px-8">
    <div class="mx-auto max-w-7xl lg:px-8">
      <div class="border-t border-zinc-100 pt-10 pb-16 dark:border-zinc-700/40">
        <div class="relative px-4 sm:px-8 lg:px-12">
          <div class="mx-auto max-w-2xl lg:max-w-5xl">
            <div class="flex flex-col items-center justify-between gap-6 sm:flex-row">
              <div class="flex gap-6 text-sm font-medium text-zinc-800 dark:text-zinc-200">
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/">Home</a>
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/about">About</a>
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/work">Work</a>
                <a class="transition hover:text-teal-500 dark:hover:text-teal-400" href="/articles">Journal</a>
              </div>
              <p class="text-sm text-zinc-400 dark:text-zinc-500">
                © 2023 Matt Sears. All rights reserved.
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</footer>

      </div>
    </div>
  </body>
</html>
